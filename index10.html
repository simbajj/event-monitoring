<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²½ìŸì‚¬ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: #f7f9fb;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 16px;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }
    .header-title {
      font-size: 2rem;
      font-weight: 700;
      color: #222;
    }
    .badge {
      background: #e3e8f0;
      color: #3b82f6;
      font-size: 0.9rem;
      border-radius: 12px;
      padding: 2px 10px;
      margin-left: 8px;
    }
    .header-actions {
      display: flex;
      gap: 8px;
    }
    .btn-primary {
      background: #2563eb;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 18px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    .btn-primary:hover {
      background: #1d4ed8;
    }
    .search-filter-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 28px;
    }
    .search-input {
      flex: 1;
      padding: 10px 14px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 1rem;
      background: #fff;
    }
    .select, .btn-filter, .btn-view {
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      background: #fff;
      font-size: 1rem;
      cursor: pointer;
    }
    .event-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
      min-height: 400px;
      align-items: stretch;
    }
    .event-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: box-shadow 0.2s, transform 0.2s;
      min-height: 370px;
      max-width: 400px;
      width: min(100%, 400px);
    }
    .event-card:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.13);
      transform: translateY(-8px) scale(1.025);
    }
    .event-img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      background: #e5e7eb;
    }
    .event-content {
      padding: 18px 16px 14px 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .event-title {
      font-size: 1.15rem;
      font-weight: 700;
      margin: 0 0 2px 0;
      color: #222;
    }
    .event-meta {
      font-size: 0.95rem;
      color: #6b7280;
      margin-bottom: 2px;
    }
    .event-info {
      font-size: 0.93rem;
      color: #374151;
      margin-bottom: 2px;
    }
    .event-actions {
      display: flex;
      gap: 10px;
      margin-top: 8px;
    }
    .event-action {
      color: #6b7280;
      font-size: 1.1rem;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
      transition: color 0.2s;
    }
    .event-action:hover {
      color: #2563eb;
    }
    .filter-panel {
      width: 260px;
      min-width: 220px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      padding: 18px 18px 18px 18px;
      margin-right: 0;
      font-size: 1rem;
      position: sticky;
      top: 32px;
      height: fit-content;
    }
    .filter-header {
      font-weight: 700;
      font-size: 1.15rem;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .filter-close {
      background: none;
      border: none;
      font-size: 1.3rem;
      color: #888;
      cursor: pointer;
      display: none;
    }
    .filter-section {
      margin-bottom: 18px;
    }
    .filter-label {
      font-weight: 600;
      margin-bottom: 6px;
      color: #374151;
    }
    .filter-section label {
      font-weight: 400;
      color: #222;
      margin-bottom: 2px;
      display: block;
      cursor: pointer;
    }
    .filter-section input[type="checkbox"] {
      margin-right: 6px;
    }
    .filter-section input[type="date"] {
      margin-top: 2px;
      margin-bottom: 2px;
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      font-size: 1rem;
    }
    .filter-divider {
      border-top: 1px solid #e5e7eb;
      margin: 14px 0 14px 0;
    }
    .filter-section label.filter-checked {
      background: #e6f2fb;
      border-radius: 7px;
      color: #2563eb;
      font-weight: 600;
      transition: background 0.15s;
    }
    /* ë¦¬ìŠ¤íŠ¸í˜• ìŠ¤íƒ€ì¼ */
    .event-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .event-list-item {
      display: flex;
      align-items: center;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      padding: 16px;
      transition: box-shadow 0.15s;
    }
    .event-list-item:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    }
    .event-list-thumb {
      width: 64px; height: 64px; border-radius: 8px; object-fit: cover; margin-right: 20px;
      background: #f3f4f6;
    }
    .event-list-info { flex: 1; min-width:0; }
    .event-list-title { font-size:1.1em; font-weight:600; margin-bottom:2px; }
    .event-list-meta { color:#888; font-size:0.97em; margin-bottom:2px; }
    .event-list-period { color:#2563eb; font-size:0.97em; }
    .event-list-actions { margin-left: 20px; display:flex; gap:8px; }
    .view-toggle-group {
      display: inline-flex;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      margin-left: 8px;
    }
    .view-toggle {
      border: none;
      background: none;
      padding: 8px 14px;
      font-size: 1.2em;
      color: #888;
      cursor: pointer;
      transition: background 0.15s, color 0.15s;
      outline: none;
    }
    .view-toggle.active {
      background: #2563eb;
      color: #fff;
    }
    .event-grid {
      display: table;
      width: 100%;
      border-radius: 12px;
      background: #fff;
      border: 1px solid #e5e7eb;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      overflow: hidden;
      margin-top: 16px;
      table-layout: fixed;
    }
    .event-grid-header, .event-grid-row {
      display: table-row;
    }
    .event-grid-header {
      background: #f5f6fa;
      font-weight: 600;
      color: #888;
      font-size: 0.98em;
      border-bottom: 2px solid #e5e7eb;
    }
    .event-grid-row {
      border-bottom: 1.5px solid #e5e7eb;
      transition: background 0.12s;
    }
    .event-grid-row:last-child {
      border-bottom: none;
    }
    .event-grid-row:hover {
      background: #f3f4f6;
    }
    .event-grid-cell {
      display: table-cell;
      vertical-align: middle;
      padding: 14px 16px;
      font-size: 1em;
      min-width: 0;
      word-break: keep-all;
      white-space: normal;
      border-right: none;
      background: #fff;
    }
    .event-grid-cell:last-child {
      border-right: none;
    }
    .event-grid-cell.img {
      width: 48px;
      padding-right: 0;
    }
    .event-grid-thumb {
      width: 40px; height: 40px; border-radius: 6px; object-fit: cover;
    }
    .event-grid-cell.actions {
      width: 48px;
      text-align: center;
    }
    /* ì¹´ë“œí˜•(ê·¸ë¦¬ë“œ) ìŠ¤íƒ€ì¼ */
    .event-card-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px;
      margin-top: 16px;
    }
    .event-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      width: 100%;
      padding: 20px 18px 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .event-img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 8px;
    }
    .event-content { flex: 1; }
    .event-title { font-size: 1.1em; font-weight: 600; margin-bottom: 2px; }
    .event-meta { color: #888; font-size: 0.97em; margin-bottom: 2px; }
    .event-info { color: #2563eb; font-size: 0.97em; }
    .event-actions { margin-top: 8px; display: flex; gap: 8px; }
    .event-list-wrapper {
      max-width: 1100px;
      margin: 0 auto;
    }
    .event-card-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(180px, 1fr));
      gap: 24px;
      margin-top: 16px;
      max-width: 1100px;
      margin-left: auto;
      margin-right: auto;
    }
    .event-card {
      max-width: 260px;
      width: 100%;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      padding: 14px 10px 12px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .event-img {
      width: 100%;
      height: 170px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 6px;
    }
    .event-grid-table {
      display: table;
      width: 100%;
      border-radius: 16px;
      background: #fff;
      border: 1.5px solid #e5e7eb;
      box-shadow: 0 4px 24px rgba(0,0,0,0.07);
      overflow: hidden;
      margin-top: 16px;
      table-layout: fixed;
      padding: 8px 0;
    }
  </style>
</head>
<body>
  <div class="container" style="display:flex; gap:32px; align-items:flex-start;">
    <!-- í•„í„° íŒ¨ë„ -->
    <aside class="filter-panel">
      <div class="filter-section">
        <div class="filter-label">ê²½ìŸì‚¬</div>
        <label><input type="checkbox" class="filter-competitor" value="í•œê²Œì„"> í•œê²Œì„</label><br>
        <label><input type="checkbox" class="filter-competitor" value="ìœˆì¡°ì´"> ìœˆì¡°ì´</label><br>
        <label><input type="checkbox" class="filter-competitor" value="ê¸°íƒ€"> ê¸°íƒ€</label>
      </div>
      <div class="filter-divider"></div>
      <div class="filter-section">
        <div class="filter-label">ê²Œì„</div>
        <label><input type="checkbox" class="filter-game" value="í•œê²Œì„ í¬ì»¤"> í•œê²Œì„ í¬ì»¤</label><br>
        <label><input type="checkbox" class="filter-game" value="í•œê²Œì„ í¬ì»¤ í´ë˜ì‹"> í•œê²Œì„ í¬ì»¤ í´ë˜ì‹</label><br>
        <label><input type="checkbox" class="filter-game" value="í•œê²Œì„ ì„¯ë‹¤"> í•œê²Œì„ ì„¯ë‹¤</label><br>
        <label><input type="checkbox" class="filter-game" value="í•œê²Œì„ ì‹ ë§ê³ "> í•œê²Œì„ ì‹ ë§ê³ </label><br>
        <label><input type="checkbox" class="filter-game" value="ìœˆì¡°ì´ í¬ì»¤"> ìœˆì¡°ì´ í¬ì»¤</label><br>
        <label><input type="checkbox" class="filter-game" value="ìœˆì¡°ì´ WPL"> ìœˆì¡°ì´ WPL</label><br>
        <label><input type="checkbox" class="filter-game" value="GG Poker"> GG Poker</label><br>
        <label><input type="checkbox" class="filter-game" value="Pokerstars"> Pokerstars</label><br>
        <label><input type="checkbox" class="filter-game" value="Pebble City"> Pebble City</label>
      </div>
      <div class="filter-divider"></div>
      <div class="filter-section">
        <div class="filter-label">í”Œë«í¼</div>
        <label><input type="checkbox" class="filter-platform" value="PC"> PC</label><br>
        <label><input type="checkbox" class="filter-platform" value="ëª¨ë°”ì¼"> ëª¨ë°”ì¼</label><br>
        <label><input type="checkbox" class="filter-platform" value="ì›¹"> ì›¹</label><br>
        <label><input type="checkbox" class="filter-platform" value="ì½˜ì†”"> ì½˜ì†”</label>
      </div>
      <div class="filter-divider"></div>
      <div class="filter-section">
        <div class="filter-label">ì´ë²¤íŠ¸ ì¢…ë¥˜</div>
        <label><input type="checkbox" class="filter-type" value="í”„ë¡œëª¨ì…˜"> í”„ë¡œëª¨ì…˜</label><br>
        <label><input type="checkbox" class="filter-type" value="ì—…ë°ì´íŠ¸"> ì—…ë°ì´íŠ¸</label><br>
        <label><input type="checkbox" class="filter-type" value="ì‹ ê·œ ì¶œì‹œ"> ì‹ ê·œ ì¶œì‹œ</label><br>
        <label><input type="checkbox" class="filter-type" value="ì œíœ´"> ì œíœ´</label><br>
        <label><input type="checkbox" class="filter-type" value="ì‹œì¦Œ ì´ë²¤íŠ¸"> ì‹œì¦Œ ì´ë²¤íŠ¸</label><br>
        <label><input type="checkbox" class="filter-type" value="ê¸°íƒ€ ì´ë²¤íŠ¸"> ê¸°íƒ€ ì´ë²¤íŠ¸</label><br>
        <label><input type="checkbox" class="filter-type" value="í• ì¸"> í• ì¸</label><br>
        <label><input type="checkbox" class="filter-type" value="ê²½í’ˆ ì´ë²¤íŠ¸"> ê²½í’ˆ ì´ë²¤íŠ¸</label>
      </div>
      <div class="filter-divider"></div>
      <div class="filter-section">
        <div class="filter-label">ì´ë²¤íŠ¸ ê¸°ê°„</div>
        <label style="font-size:0.97em;">ì‹œì‘ì¼<br><input type="date" class="filter-date" id="filterStart"></label><br>
        <label style="font-size:0.97em;">ì¢…ë£Œì¼<br><input type="date" class="filter-date" id="filterEnd"></label>
      </div>
    </aside>
    <div style="flex:1; min-width:0;">
    <div class="header">
      <div class="header-title">
        ê²½ìŸì‚¬ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§ <span class="badge">ì‹ ê·œ ì´ë²¤íŠ¸</span>
      </div>
      <div class="header-actions">
        <span id="adminWelcomeMsg" style="display:none; margin-right:10px; font-weight:500; color:#2563eb;">adminë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.</span>
        <button class="btn-cancel" id="logoutBtn" style="display:none;">ë¡œê·¸ì•„ì›ƒ</button>
        <button class="btn-primary" id="openModalBtn" type="button">+ ì´ë²¤íŠ¸ ë“±ë¡</button>
      </div>
    </div>
    <div class="search-filter-row">
      <input class="search-input" type="text" placeholder="ì´ë²¤íŠ¸ ì œëª©, ê²½ìŸì‚¬, ê²Œì„ëª…ìœ¼ë¡œ ê²€ìƒ‰...">
      <select class="select">
        <option>ìµœì‹ ìˆœ</option>
        <option>ì¸ê¸°ìˆœ</option>
        <option>ë§ˆê°ì„ë°•ìˆœ</option>
      </select>
      <div class="view-toggle-group">
        <button id="gridViewBtn" class="view-toggle active" title="ì¹´ë“œí˜• ë³´ê¸°">â–¡</button>
        <button id="listViewBtn" class="view-toggle" title="ë¦¬ìŠ¤íŠ¸í˜• ë³´ê¸°">â‰¡</button>
      </div>
    </div>
    <div id="eventGrid" class="event-list-wrapper">
      <!-- ì´ë²¤íŠ¸ ì¹´ë“œëŠ” JSì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
    </div>
  </div>

  <!-- ì´ë²¤íŠ¸ ë“±ë¡ ëª¨ë‹¬ -->
  <div id="eventModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title">ìƒˆ ì´ë²¤íŠ¸ ë“±ë¡</span>
        <button class="modal-preview">ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸°</button>
      </div>
      <form class="event-form" id="eventForm">
        <label>ì´ë²¤íŠ¸ ì œëª© <span class="required">*</span></label>
        <input type="text" placeholder="ì´ë²¤íŠ¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required id="formTitle">
        <div class="form-row">
          <div class="form-group">
            <label>ê²½ìŸì‚¬ (optional)</label>
            <select id="formCompetitor">
              <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              <option>í•œê²Œì„</option>
              <option>ìœˆì¡°ì´</option>
              <option>ê¸°íƒ€</option>
            </select>
          </div>
          <div class="form-group">
            <label>ê²Œì„ëª… <span class="required">*</span></label>
            <select required id="formGame">
              <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              <option>í•œê²Œì„ í¬ì»¤</option>
              <option>í•œê²Œì„ í¬ì»¤ í´ë˜ì‹</option>
              <option>í•œê²Œì„ ì„¯ë‹¤</option>
              <option>í•œê²Œì„ ì‹ ë§ê³ </option>
              <option>ìœˆì¡°ì´ í¬ì»¤</option>
              <option>ìœˆì¡°ì´ WPL</option>
              <option>GG Poker</option>
              <option>Pokerstars</option>
              <option>Pebble City</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>í”Œë«í¼ <span class="required">*</span></label>
            <div class="checkbox-group" id="formPlatformGroup">
              <label><input type="checkbox" value="PC"> PC</label>
              <label><input type="checkbox" value="ëª¨ë°”ì¼"> ëª¨ë°”ì¼</label>
              <label><input type="checkbox" value="ì›¹"> ì›¹</label>
              <label><input type="checkbox" value="ì½˜ì†”"> ì½˜ì†”</label>
            </div>
          </div>
          <div class="form-group">
            <label>ì´ë²¤íŠ¸ ì¢…ë¥˜ <span class="required">*</span></label>
            <select required id="formType">
              <option>ì„ íƒí•˜ì„¸ìš”</option>
              <option>í• ì¸</option>
              <option>ì—…ë°ì´íŠ¸</option>
              <option>ì‹ ê·œ ì¶œì‹œ</option>
              <option>ì‹œì¦Œ ì´ë²¤íŠ¸</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>ì‹œì‘ì¼ <span class="required">*</span></label>
            <input type="date" required id="formStart">
          </div>
          <div class="form-group">
            <label>ì¢…ë£Œì¼ <span class="required">*</span></label>
            <input type="date" required id="formEnd">
          </div>
        </div>
        <label>ì´ë²¤íŠ¸ ì´ë¯¸ì§€ (ì„ íƒì‚¬í•­, ìµœëŒ€ 4ì¥)</label>
        <div class="image-upload-box" id="imageDropArea">
          <div class="image-upload-instructions" id="imageUploadInstructions">
            <span class="image-icon">ğŸ–¼ï¸</span><br>
            ì´ë¯¸ì§€ë¥¼ <b>ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°(Ctrl+V)</b> í•˜ê±°ë‚˜,<br>
            ì´ ì˜ì—­ì— <b>ë“œë˜ê·¸&ë“œë¡­</b> í•˜ì„¸ìš”.<br>
            (ìµœëŒ€ 4ì¥, íŒŒì¼ ì—…ë¡œë“œ/URL ì…ë ¥ì€ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤)
          </div>
          <div class="image-multi-preview" id="imageMultiPreview"></div>
        </div>
        <label>ì°¸ê³  URL</label>
        <input type="text" placeholder="https://example.com/event-page" id="formLink">
        <label>ì´ë²¤íŠ¸ ë‚´ìš© <span class="required">*</span></label>
        <textarea rows="3" placeholder="ì´ë²¤íŠ¸ ìƒì„¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required id="formContent"></textarea>
        <label>í˜œíƒ/ë³´ìƒ <span class="required">*</span></label>
        <textarea rows="2" placeholder="ì œê³µë˜ëŠ” í˜œíƒê³¼ ë³´ìƒì„ ì…ë ¥í•˜ì„¸ìš”" required id="formBenefit"></textarea>
        <div class="form-actions">
          <button type="button" class="btn-cancel" id="cancelModalBtn">ì·¨ì†Œ</button>
          <button type="submit" class="btn-primary" id="formSubmitBtn">ë“±ë¡</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ì´ë²¤íŠ¸ ìƒì„¸ ëª¨ë‹¬ -->
  <div id="eventDetailModal" class="modal">
    <div class="modal-content detail-modal-content">
      <div class="modal-header">
        <span class="modal-title">ì´ë²¤íŠ¸ ìƒì„¸ ì •ë³´</span>
        <button class="modal-close" id="closeDetailModalBtn">&times;</button>
      </div>
      <div class="detail-main">
        <div class="detail-body">
          <div class="detail-title" id="detailTitle"></div>
          <div class="detail-meta">
            <span id="detailCompetitor"></span>
            Â· <span id="detailGame"></span>
            Â· <span id="detailType"></span>
          </div>
          <img id="detailImage" class="detail-image" src="" alt="ì´ë²¤íŠ¸ ì´ë¯¸ì§€">
          <div class="detail-section">
            <div class="detail-section-title">ì´ë²¤íŠ¸ ë‚´ìš©</div>
            <div class="detail-section-content" id="detailContent"></div>
          </div>
          <div class="detail-section">
            <div class="detail-section-title">í˜œíƒ/ë³´ìƒ</div>
            <div class="detail-section-content detail-benefit" id="detailBenefit"></div>
          </div>
          <div class="detail-section">
            <div class="detail-section-title">ì°¸ê³  ë§í¬</div>
            <div class="detail-section-content"><a id="detailLink" href="#" target="_blank">ì´ë²¤íŠ¸ í˜ì´ì§€ ë°”ë¡œê°€ê¸°</a></div>
          </div>
        </div>
        <div class="detail-side">
          <div class="detail-box">
            <div class="detail-box-title">ê¸°ë³¸ ì •ë³´</div>
            <div class="detail-box-row"><span>ì´ë²¤íŠ¸ ê¸°ê°„</span><br><span id="detailPeriod"></span></div>
            <div class="detail-box-row"><span>í”Œë«í¼</span><br><span id="detailPlatform"></span></div>
            <div class="detail-box-row"><span>ì´ë²¤íŠ¸ ì¢…ë¥˜</span><br><span id="detailType2"></span></div>
          </div>
          <div class="detail-box">
            <div class="detail-box-title">ë©”íƒ€ ì •ë³´</div>
            <div class="detail-box-row"><span>ìƒì„±ì¼</span><br><span id="detailCreated"></span></div>
            <div class="detail-box-row"><span>ìˆ˜ì •ì¼</span><br><span id="detailUpdated"></span></div>
          </div>
          <div class="detail-edit-btn-box">
            <button class="btn-primary" id="editEventBtn">ìˆ˜ì •</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ê´€ë¦¬ì ì½”ë“œ ì…ë ¥ ëª¨ë‹¬ -->
  <div id="adminCodeModal" class="modal">
    <div class="modal-content admin-modal-content">
      <div class="modal-header">
        <span class="modal-title">ê´€ë¦¬ì ì¸ì¦</span>
      </div>
      <div class="admin-modal-body">
        <div id="adminCodePrompt">ê´€ë¦¬ì ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>
        <input type="password" id="adminCodeInput" class="admin-code-input" placeholder="ê´€ë¦¬ì ì½”ë“œ ì…ë ¥">
        <div id="adminCodeError" class="admin-code-error" style="display:none;">ì½”ë“œê°€ í‹€ë¦½ë‹ˆë‹¤.</div>
        <div class="admin-modal-actions">
          <button class="btn-primary" id="adminCodeConfirmBtn">í™•ì¸</button>
          <button class="btn-cancel" id="adminCodeCancelBtn">ì·¨ì†Œ</button>
        </div>
      </div>
    </div>
  </div>
  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.25);
      justify-content: center;
      align-items: center;
    }
    .modal.show { display: flex; }
    .modal-content {
      background: #fff;
      border-radius: 12px;
      width: 600px;
      max-width: 95vw;
      max-height: 95vh;
      overflow-y: auto;
      box-shadow: 0 4px 24px rgba(0,0,0,0.15);
      padding: 32px 28px 24px 28px;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .modal-title {
      font-size: 1.3rem;
      font-weight: 700;
    }
    .modal-close {
      background: none;
      border: none;
      font-size: 2rem;
      color: #888;
      cursor: pointer;
      margin-left: 8px;
    }
    .modal-preview {
      background: #f3f4f6;
      border: none;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 1rem;
      color: #374151;
      cursor: pointer;
      margin-left: 8px;
    }
    .event-form label { font-weight: 500; margin-top: 10px; display: block; }
    .event-form input[type="text"],
    .event-form input[type="date"],
    .event-form select,
    .event-form textarea {
      width: 100%;
      padding: 8px 10px;
      margin: 4px 0 10px 0;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 1rem;
      background: #f9fafb;
      resize: none;
    }
    .form-row {
      display: flex;
      gap: 16px;
    }
    .form-group { flex: 1; }
    .checkbox-group { display: flex; gap: 10px; margin-top: 4px; }
    .image-upload-box {
      border: 2px dashed #d1d5db;
      border-radius: 8px;
      padding: 18px;
      text-align: center;
      margin-bottom: 10px;
      background: #f9fafb;
    }
    .image-upload-instructions { color: #6b7280; font-size: 0.98rem; }
    .image-icon { font-size: 2.2rem; display: block; margin-bottom: 6px; }
    .image-upload-actions { margin-top: 10px; display: flex; gap: 10px; justify-content: center; }
    .image-upload-actions button {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 1rem;
      color: #374151;
      cursor: pointer;
    }
    .image-url-input {
      margin-bottom: 10px;
      font-size: 0.98rem;
      color: #6b7280;
    }
    .required { color: #ef4444; font-size: 1.1em; }
    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 18px;
    }
    .btn-cancel {
      background: #f3f4f6;
      border: none;
      border-radius: 6px;
      padding: 8px 18px;
      font-size: 1rem;
      color: #374151;
      cursor: pointer;
    }
    .detail-modal-content {
      width: 800px;
      max-width: 98vw;
      padding: 0;
      gap: 0;
    }
    .detail-main {
      display: flex;
      flex-direction: row;
      gap: 0;
      min-height: 500px;
    }
    .detail-body {
      flex: 2;
      padding: 32px 32px 24px 32px;
    }
    .detail-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 6px;
    }
    .detail-meta {
      color: #6b7280;
      font-size: 1rem;
      margin-bottom: 18px;
    }
    .detail-image {
      width: 100%;
      max-height: 220px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 18px;
      background: #e5e7eb;
    }
    .detail-section {
      margin-bottom: 18px;
    }
    .detail-section-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: #222;
    }
    .detail-section-content {
      background: #f3f4f6;
      border-radius: 6px;
      padding: 10px 12px;
      font-size: 1rem;
      color: #374151;
    }
    .detail-benefit {
      background: #e0f2fe;
      color: #0369a1;
    }
    .detail-side {
      flex: 1;
      background: #f7f9fb;
      border-left: 1px solid #e5e7eb;
      padding: 32px 24px 24px 24px;
      min-width: 220px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
    }
    .detail-edit-btn-box {
      display: flex;
      justify-content: flex-end;
      align-items: flex-end;
      flex: 1;
      margin-top: auto;
    }
    .detail-edit-btn-box .btn-primary {
      min-width: 80px;
      font-size: 1rem;
      padding: 8px 20px;
    }
    .detail-box {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
      padding: 16px 14px 12px 14px;
      margin-bottom: 8px;
    }
    .detail-box-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: #2563eb;
      font-size: 1.05rem;
    }
    .detail-box-row {
      font-size: 0.98rem;
      margin-bottom: 8px;
      color: #374151;
    }
    @media (max-width: 900px) {
      .detail-main { flex-direction: column; }
      .detail-side { border-left: none; border-top: 1px solid #e5e7eb; min-width: 0; padding: 24px 16px; }
    }
    .image-preview-wrapper {
      display: block;
      position: relative;
      width: 100%;
      max-width: 100%;
    }
    .remove-image-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      background: rgba(0,0,0,0.5);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 26px;
      height: 26px;
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s;
    }
    .remove-image-btn:hover {
      background: #ef4444;
    }
    .admin-modal-content {
      width: 350px;
      max-width: 90vw;
      padding: 32px 24px 24px 24px;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .admin-modal-body {
      display: flex;
      flex-direction: column;
      gap: 14px;
      align-items: stretch;
    }
    .admin-code-input {
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 1rem;
      margin-bottom: 2px;
    }
    .admin-code-error {
      color: #ef4444;
      font-size: 1rem;
      margin-bottom: 2px;
      text-align: left;
    }
    .admin-modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }
    .image-multi-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 10px;
    }
    .image-multi-preview .multi-image-thumb {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      background: #f3f4f6;
      margin-bottom: 2px;
    }
    .image-multi-preview .multi-image-thumb img {
      display: block;
      max-width: 180px;
      max-height: 120px;
      border-radius: 8px;
    }
    .image-multi-preview .remove-image-btn {
      position: absolute;
      top: 6px;
      right: 8px;
      background: rgba(0,0,0,0.5);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      font-size: 1rem;
      cursor: pointer;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s;
    }
    .image-multi-preview .remove-image-btn:hover {
      background: #ef4444;
    }
  </style>
  <script>
    const openModalBtn = document.getElementById('openModalBtn');
    const cancelModalBtn = document.getElementById('cancelModalBtn');
    const eventModal = document.getElementById('eventModal');
    window.onclick = function(event) {
      if (event.target === eventModal) eventModal.classList.remove('show');
    }

    // 1. ì´ë²¤íŠ¸ ë°ì´í„° ë°°ì—´ ì„ ì–¸ (ì´ˆê¸° ì¹´ë“œ ë°ì´í„°ë„ ì—¬ê¸°ì— ë„£ì„ ìˆ˜ ìˆìŒ)
    let events = [
      {
        title: 'ì„¤ë‚  íŠ¹ë³„ í• ì¸ ì´ë²¤íŠ¸',
        competitor: 'ìœˆì¡°ì´',
        game: 'ìœˆì¡°ì´ í¬ì»¤',
        platform: 'ëª¨ë°”ì¼',
        type: 'í• ì¸',
        start: '2024-02-01',
        end: '2024-02-14',
        images: ['https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=400&q=80'],
        link: 'https://event.example.com/1',
        content: 'ì„¤ë‚ ì„ ë§ì•„ ëª¨ë“  ì•„ì´í…œ 50% í• ì¸ íŒë§¤',
        benefit: 'ì•„ì´í…œ 50% í• ì¸, ë¬´ë£Œ ì¹© ì§€ê¸‰, ê²½í—˜ì¹˜ 2ë°°',
      },
      {
        title: 'ì‹ ê·œ ê²Œì„ ëª¨ë“œ ì˜¤í”ˆ',
        competitor: 'GG Poker',
        game: 'GG Poker',
        platform: 'PC,ëª¨ë°”ì¼',
        type: 'ì—…ë°ì´íŠ¸',
        start: '2024-01-20',
        end: '2024-02-05',
        images: ['https://images.unsplash.com/photo-1517520287167-4bbf64a00d66?auto=format&fit=crop&w=400&q=80'],
        link: 'https://event.example.com/2',
        content: 'ì‹ ê·œ ê²Œì„ ëª¨ë“œ ì˜¤í”ˆ ê¸°ë… ì´ë²¤íŠ¸! ë‹¤ì–‘í•œ ë³´ìƒê³¼ í•¨ê»˜ ìƒˆë¡œìš´ ëª¨ë“œë¥¼ ì¦ê²¨ë³´ì„¸ìš”.',
        benefit: 'ì‹ ê·œ ëª¨ë“œ í”Œë ˆì´ ì‹œ ë³´ìƒ ì§€ê¸‰, í•œì • ì•„ì´í…œ ì œê³µ',
      },
      {
        title: 'ì‹ ê·œ í† ë„ˆë¨¼íŠ¸ ì¶œì‹œ ê¸°ë… ì´ë²¤íŠ¸',
        competitor: 'í•œê²Œì„',
        game: 'í•œê²Œì„ í¬ì»¤',
        platform: 'PC,ëª¨ë°”ì¼',
        type: 'ì‹ ê·œ ì¶œì‹œ',
        start: '2024-01-15',
        end: '2024-01-29',
        images: ['https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80'],
        link: 'https://event.example.com/3',
        content: 'ì‹ ê·œ í† ë„ˆë¨¼íŠ¸ ì¶œì‹œë¥¼ ê¸°ë…í•˜ì—¬ ë‹¤ì–‘í•œ ê²½í’ˆê³¼ ë³´ìƒì„ ë“œë¦½ë‹ˆë‹¤.',
        benefit: 'í† ë„ˆë¨¼íŠ¸ ì°¸ê°€ì ì „ì› ë³´ìƒ, ìƒìœ„ ì…ìƒì ì¶”ê°€ ê²½í’ˆ',
      },
      {
        title: 'WPL ì‹œì¦Œ ì‹œì‘ ì´ë²¤íŠ¸',
        competitor: 'ìœˆì¡°ì´',
        game: 'ìœˆì¡°ì´ WPL',
        platform: 'PC,ëª¨ë°”ì¼',
        type: 'ì‹œì¦Œ ì´ë²¤íŠ¸',
        start: '2023-12-01',
        end: '2023-12-31',
        images: ['https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=400&q=80'],
        link: 'https://event.example.com/4',
        content: 'WPL ì‹œì¦Œ ì‹œì‘ì„ ê¸°ë…í•˜ì—¬ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ì™€ ë³´ìƒì„ ì œê³µí•©ë‹ˆë‹¤.',
        benefit: 'ì‹œì¦Œ ë­í‚¹ ë³´ìƒ, ì°¸ê°€ì ì „ì› ê¸°ë… ì•„ì´í…œ',
      }
    ];

    // 2. ì¹´ë“œ ëª©ë¡ì„ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜ (event-grid ë‚´ë¶€ì— ë™ì ìœ¼ë¡œ ì¹´ë“œ ì¶”ê°€)
    // JS: ë·° ì „í™˜ ìƒíƒœ ê´€ë¦¬ ë° renderEvents ìˆ˜ì •
    let currentView = 'card'; // 'table', 'card', 'list'
    const gridViewBtn = document.getElementById('gridViewBtn');
    const listViewBtn = document.getElementById('listViewBtn');
    gridViewBtn.onclick = function() {
      currentView = 'card';
      renderEvents();
      gridViewBtn.classList.add('active');
      listViewBtn.classList.remove('active');
    };
    listViewBtn.onclick = function() {
      currentView = 'table';
      renderEvents();
      listViewBtn.classList.add('active');
      gridViewBtn.classList.remove('active');
    };

    function formatDate(dateStr) {
      if (!dateStr) return '';
      const [y, m, d] = dateStr.split('-');
      return `${y}ë…„ ${parseInt(m,10)}ì›” ${parseInt(d,10)}ì¼`;
    }

    function renderEvents() {
      const grid = document.getElementById('eventGrid');
      if (currentView === 'table') {
        grid.className = 'event-grid-table';
        grid.innerHTML = `
          <div class="event-grid-header">
            <div class="event-grid-cell img"></div>
            <div class="event-grid-cell">ì´ë²¤íŠ¸</div>
            <div class="event-grid-cell">ê²½ìŸì‚¬/ê²Œì„</div>
            <div class="event-grid-cell">í”Œë«í¼</div>
            <div class="event-grid-cell">ê¸°ê°„</div>
            <div class="event-grid-cell actions">ì‘ì—…</div>
          </div>
        `;
        events.forEach(event => {
          const row = document.createElement('div');
          row.className = 'event-grid-row';
          row.innerHTML = `
            <div class="event-grid-cell img"><img src="${event.images[0] || ''}" class="event-grid-thumb"></div>
            <div class="event-grid-cell">
              <div style="font-weight:600;">${event.title}</div>
              <div style="color:#888;font-size:0.97em;">${event.type}</div>
            </div>
            <div class="event-grid-cell">
              <div>${event.competitor || '-'}</div>
              <div style="color:#888;font-size:0.97em;">${event.game}</div>
            </div>
            <div class="event-grid-cell">${event.platform}</div>
            <div class="event-grid-cell">
              <div>${formatDate(event.start)}</div>
              <div style="color:#888;">~ ${formatDate(event.end)}</div>
            </div>
            <div class="event-grid-cell actions">
              <button class="event-action" title="ë³´ê¸°">ğŸ”—</button>
            </div>
          `;
          grid.appendChild(row);
        });
      } else if (currentView === 'card') {
        grid.className = 'event-card-grid';
        grid.innerHTML = '';
        events.forEach((event, idx) => {
          const card = document.createElement('div');
          card.className = 'event-card';
          card.innerHTML = `
            <img class="event-img" src="${event.images[0] || ''}" alt="ì´ë²¤íŠ¸ ì´ë¯¸ì§€">
            <div class="event-content">
              <div class="event-title">${event.title}</div>
              <div class="event-meta">${event.competitor ? event.competitor + ' Â· ' : ''}${event.game}</div>
              <div class="event-info">${event.start} ~ ${event.end}</div>
              <div class="event-info">í”Œë«í¼: ${event.platform} | ì¢…ë¥˜: ${event.type}</div>
              <div class="event-actions">
                <button class="event-action" title="ë³´ê¸°">ğŸ”—</button>
              </div>
            </div>
          `;
          // ì¹´ë“œ ì „ì²´ í´ë¦­ ì‹œ ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°
          card.onclick = function(e) {
            if (e.target.closest('.event-action')) return;
            showEventDetail(event);
          };
          // ğŸ”— ë²„íŠ¼ í´ë¦­ ì‹œ ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°
          card.querySelector('.event-action').onclick = function(e) {
            e.stopPropagation();
            showEventDetail(event);
          };
          grid.appendChild(card);
        });
      }
      // ìƒì„¸/ìˆ˜ì • íŠ¸ë¦¬ê±° ë“± ê¸°ì¡´ ë°”ì¸ë”© í•¨ìˆ˜ ì¬í˜¸ì¶œ í•„ìš”
      bindEventDetailTriggers && bindEventDetailTriggers();
    }

    function showEventDetail(event) {
      document.getElementById('detailTitle').textContent = event.title;
      document.getElementById('detailCompetitor').textContent = event.competitor;
      document.getElementById('detailGame').textContent = event.game;
      document.getElementById('detailType').textContent = event.type;
      document.getElementById('detailImage').src = event.images[0] || '';
      document.getElementById('detailContent').textContent = event.content || '';
      document.getElementById('detailBenefit').textContent = event.benefit || '';
      document.getElementById('detailPeriod').textContent = `${formatDate(event.start)} ~ ${formatDate(event.end)}`;
      document.getElementById('detailPlatform').textContent = event.platform;
      document.getElementById('detailType2').textContent = event.type;
      document.getElementById('detailCreated').textContent = 'N/A';
      document.getElementById('detailUpdated').textContent = 'N/A';
      updateDetailLink(event.link);
      eventDetailModal.classList.add('show');
    }

    // 3. ìµœì´ˆ ë Œë”ë§
    renderEvents();

    // 4. í¼ ì œì¶œ ì‹œ ë°°ì—´ì— ì¶”ê°€í•˜ê³  renderEvents í˜¸ì¶œ
    // ì´ë¯¸ì§€ ë“œë˜ê·¸&ë“œë¡­, ë¶™ì—¬ë„£ê¸° ì—…ë¡œë“œ êµ¬í˜„
    const imageDropArea = document.getElementById('imageDropArea');
    const imageUploadInstructions = document.getElementById('imageUploadInstructions');
    const imageMultiPreview = document.getElementById('imageMultiPreview');
    let uploadedImages = [];

    function renderMultiPreview() {
      imageMultiPreview.innerHTML = '';
      uploadedImages.forEach((imgData, idx) => {
        const thumb = document.createElement('div');
        thumb.className = 'multi-image-thumb';
        const img = document.createElement('img');
        img.src = imgData;
        img.alt = 'ì´ë²¤íŠ¸ ì´ë¯¸ì§€';
        thumb.appendChild(img);
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'remove-image-btn';
        btn.title = 'ì´ë¯¸ì§€ ì œê±°';
        btn.innerHTML = '&times;';
        btn.onclick = () => {
          uploadedImages.splice(idx, 1);
          renderMultiPreview();
          if (uploadedImages.length === 0) imageUploadInstructions.style.display = '';
        };
        thumb.appendChild(btn);
        imageMultiPreview.appendChild(thumb);
      });
      imageUploadInstructions.style.display = uploadedImages.length > 0 ? 'none' : '';
    }

    function addImage(fileOrUrl) {
      if (uploadedImages.length >= 4) return;
      if (typeof fileOrUrl === 'string') {
        uploadedImages.push(fileOrUrl);
        renderMultiPreview();
      } else {
        const reader = new FileReader();
        reader.onload = function(e) {
          uploadedImages.push(e.target.result);
          renderMultiPreview();
        };
        reader.readAsDataURL(fileOrUrl);
      }
    }

    imageDropArea.addEventListener('dragover', function(e) {
      e.preventDefault();
      imageDropArea.style.background = '#e0e7ef';
    });
    imageDropArea.addEventListener('dragleave', function(e) {
      e.preventDefault();
      imageDropArea.style.background = '';
    });
    imageDropArea.addEventListener('drop', function(e) {
      e.preventDefault();
      imageDropArea.style.background = '';
      const files = e.dataTransfer.files;
      if (files && files.length > 0) {
        for (let i = 0; i < files.length && uploadedImages.length < 4; i++) {
          if (files[i].type.startsWith('image/')) {
            addImage(files[i]);
          }
        }
      }
    });
    imageDropArea.addEventListener('paste', function(e) {
      const items = (e.clipboardData || window.clipboardData).items;
      for (let i = 0; i < items.length && uploadedImages.length < 4; i++) {
        if (items[i].type.indexOf('image') !== -1) {
          const file = items[i].getAsFile();
          addImage(file);
        }
      }
    });

    // ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
    const eventDetailModal = document.getElementById('eventDetailModal');
    const closeDetailModalBtn = document.getElementById('closeDetailModalBtn');
    const editEventBtn = document.getElementById('editEventBtn');
    const eventForm = document.getElementById('eventForm');
    const formTitle = document.getElementById('formTitle');
    const formCompetitor = document.getElementById('formCompetitor');
    const formGame = document.getElementById('formGame');
    const formPlatformGroup = document.getElementById('formPlatformGroup');
    const formType = document.getElementById('formType');
    const formStart = document.getElementById('formStart');
    const formEnd = document.getElementById('formEnd');
    const formLink = document.getElementById('formLink');
    const formContent = document.getElementById('formContent');
    const formBenefit = document.getElementById('formBenefit');
    const formSubmitBtn = document.getElementById('formSubmitBtn');
    const modalTitle = document.querySelector('#eventModal .modal-title');

    function bindEventDetailTriggers() {
      document.querySelectorAll('.event-grid-row').forEach(row => {
        row.querySelectorAll('.event-action').forEach(actionBtn => {
          actionBtn.onclick = function() {
            const eventData = {};
            row.querySelectorAll('.event-grid-cell').forEach(cell => {
              if (cell.classList.contains('img')) {
                eventData.image = cell.querySelector('img').src;
              } else if (cell.textContent.includes('ì´ë²¤íŠ¸')) {
                eventData.title = cell.textContent.trim();
              } else if (cell.textContent.includes('ê²½ìŸì‚¬/ê²Œì„')) {
                const [competitor, game] = cell.textContent.trim().split('Â·');
                eventData.competitor = competitor.trim();
                eventData.game = game.trim();
              } else if (cell.textContent.includes('í”Œë«í¼')) {
                eventData.platform = cell.textContent.trim();
              } else if (cell.textContent.includes('ê¸°ê°„')) {
                const [start, end] = cell.textContent.trim().split('~');
                eventData.start = start.trim().replace('ë…„ ', '-').replace('ì›” ', '-').replace('ì¼', '');
                eventData.end = end.trim().replace('ë…„ ', '-').replace('ì›” ', '-').replace('ì¼', '');
              } else if (cell.textContent.includes('ì‘ì—…')) {
                // ìˆ˜ì • ë²„íŠ¼ì€ ë³„ë„ë¡œ ì²˜ë¦¬
              }
            });
            // ì´ë¯¸ì§€ ë°ì´í„°ëŠ” ë³„ë„ë¡œ ì²˜ë¦¬
            const imgCell = row.querySelector('.event-grid-cell.img');
            const imgSrc = imgCell ? imgCell.querySelector('img').src : '';
            eventData.images = imgSrc ? [imgSrc] : [];

            // ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°
            document.getElementById('detailTitle').textContent = eventData.title;
            document.getElementById('detailCompetitor').textContent = eventData.competitor;
            document.getElementById('detailGame').textContent = eventData.game;
            document.getElementById('detailType').textContent = eventData.type;
            document.getElementById('detailImage').src = eventData.images[0] || '';
            document.getElementById('detailContent').textContent = ''; // ìƒì„¸ ë‚´ìš©ì€ ëª¨ë‹¬ì—ì„œ ë³„ë„ë¡œ ì…ë ¥
            document.getElementById('detailBenefit').textContent = ''; // í˜œíƒ/ë³´ìƒì€ ëª¨ë‹¬ì—ì„œ ë³„ë„ë¡œ ì…ë ¥
            document.getElementById('detailPeriod').textContent = `${formatDate(eventData.start)} ~ ${formatDate(eventData.end)}`;
            document.getElementById('detailPlatform').textContent = eventData.platform;
            document.getElementById('detailType2').textContent = eventData.type;
            document.getElementById('detailCreated').textContent = 'N/A'; // ìƒì„±ì¼ì€ ë°ì´í„°ì— ì—†ìœ¼ë¯€ë¡œ ëŒ€ì²´
            document.getElementById('detailUpdated').textContent = 'N/A'; // ìˆ˜ì •ì¼ì€ ë°ì´í„°ì— ì—†ìœ¼ë¯€ë¡œ ëŒ€ì²´

            // ìˆ˜ì • ë²„íŠ¼ì— í˜„ì¬ ì´ë¯¸ì§€ì˜ ë°ì´í„° ì €ì¥
            editEventBtn.dataset.img = eventData.images[0] || '';
            for (const key in eventData) {
              editEventBtn.dataset[key] = eventData[key];
            }
            editEventBtn.dataset.images = JSON.stringify(eventData.images || []);

            eventDetailModal.classList.add('show');
          }
        });
      });
    }
    bindEventDetailTriggers();
    closeDetailModalBtn.onclick = () => eventDetailModal.classList.remove('show');
    window.addEventListener('click', function(event) {
      if (event.target === eventDetailModal) eventDetailModal.classList.remove('show');
    });
    // ESC í‚¤ë¡œ ìƒì„¸ ëª¨ë‹¬ ë‹«ê¸°
    window.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        // ê´€ë¦¬ì ì¸ì¦ ëª¨ë‹¬ì´ ì—´ë ¤ ìˆìœ¼ë©´ ê·¸ê±¸ ë¨¼ì € ë‹«ìŒ
        if (adminCodeModal && adminCodeModal.classList.contains('show')) {
          closeAdminCodeModal();
        } else if (eventDetailModal.classList.contains('show')) {
          eventDetailModal.classList.remove('show');
        } else if (eventModal.classList.contains('show')) {
          eventModal.classList.remove('show');
        }
      }
    });

    // ê´€ë¦¬ì ì½”ë“œ ì¸ì¦ ë¡œì§
    const adminCodeModal = document.getElementById('adminCodeModal');
    const adminCodeInput = document.getElementById('adminCodeInput');
    const adminCodeConfirmBtn = document.getElementById('adminCodeConfirmBtn');
    const adminCodeError = document.getElementById('adminCodeError');
    const adminCodeCancelBtn = document.getElementById('adminCodeCancelBtn');
    let adminCallback = null;
    let isAdminLoggedIn = false;

    function openAdminCodeModal(callback) {
      adminCodeInput.value = '';
      adminCodeError.style.display = 'none';
      adminCodeModal.classList.add('show');
      adminCallback = callback;
      setTimeout(() => adminCodeInput.focus(), 100);
    }
    function closeAdminCodeModal() {
      adminCodeModal.classList.remove('show');
      adminCallback = null;
    }
    function setAdminLoginState(loggedIn) {
      isAdminLoggedIn = loggedIn;
      document.getElementById('logoutBtn').style.display = loggedIn ? '' : 'none';
      document.getElementById('adminWelcomeMsg').style.display = loggedIn ? '' : 'none';
    }
    adminCodeConfirmBtn.onclick = function() {
      if (adminCodeInput.value === 'admin') {
        closeAdminCodeModal();
        setAdminLoginState(true);
        if (typeof adminCallback === 'function') adminCallback();
      } else {
        adminCodeError.style.display = '';
      }
    };
    adminCodeCancelBtn.onclick = function() {
      closeAdminCodeModal();
    };
    adminCodeInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') adminCodeConfirmBtn.click();
    });
    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    window.addEventListener('click', function(event) {
      if (event.target === adminCodeModal) closeAdminCodeModal();
    });
    // ë“±ë¡/ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ ê´€ë¦¬ì ì¸ì¦
    // ë“±ë¡ ëª¨ë‹¬ì€ ì¸ì¦ ì„±ê³µ ì‹œì—ë§Œ ì—´ë¦¬ë„ë¡ ë³´ì¥ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)
    openModalBtn.addEventListener('click', function(e) {
      e.preventDefault();
      if (isAdminLoggedIn) {
        modalTitle.textContent = 'ìƒˆ ì´ë²¤íŠ¸ ë“±ë¡';
        formSubmitBtn.textContent = 'ë“±ë¡';
        eventModal.classList.add('show');
      } else {
        openAdminCodeModal(function() {
          modalTitle.textContent = 'ìƒˆ ì´ë²¤íŠ¸ ë“±ë¡';
          formSubmitBtn.textContent = 'ë“±ë¡';
          eventModal.classList.add('show');
        });
      }
    });

    // ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ ì·¨ì†Œ ë²„íŠ¼ ë™ì‘
    if (cancelModalBtn) {
      cancelModalBtn.addEventListener('click', function(e) {
        e.preventDefault();
        eventModal.classList.remove('show');
      });
    }
    editEventBtn.onclick = function() {
      if (isAdminLoggedIn) {
        modalTitle.textContent = 'ì´ë²¤íŠ¸ ìˆ˜ì •';
        formSubmitBtn.textContent = 'ìˆ˜ì •';
        formTitle.value = this.dataset.title || '';
        formCompetitor.value = this.dataset.competitor || '';
        formGame.value = this.dataset.game || '';
        const platforms = (this.dataset.platform || '').split(',').map(s => s.trim());
        formPlatformGroup.querySelectorAll('input[type=checkbox]').forEach(cb => {
          cb.checked = platforms.includes(cb.value);
        });
        formType.value = this.dataset.type || '';
        const periodMatch = (this.dataset.period||'').match(/(\d{4})ë…„ (\d{1,2})ì›” (\d{1,2})ì¼ ~ (\d{4})ë…„ (\d{1,2})ì›” (\d{1,2})ì¼/);
        if (periodMatch) {
          formStart.value = `${periodMatch[1]}-${periodMatch[2].padStart(2,'0')}-${periodMatch[3].padStart(2,'0')}`;
          formEnd.value = `${periodMatch[4]}-${periodMatch[5].padStart(2,'0')}-${periodMatch[6].padStart(2,'0')}`;
        } else {
          formStart.value = '';
          formEnd.value = '';
        }
        if (this.dataset.images) {
          try {
            uploadedImages = JSON.parse(this.dataset.images);
          } catch {
            uploadedImages = this.dataset.img ? [this.dataset.img] : [];
          }
          renderMultiPreview();
        } else if (this.dataset.img) {
          uploadedImages = [this.dataset.img];
          renderMultiPreview();
        } else {
          uploadedImages = [];
          renderMultiPreview();
        }
        formLink.value = this.dataset.link || '';
        formContent.value = this.dataset.content || '';
        formBenefit.value = this.dataset.benefit || '';
        eventModal.classList.add('show');
        eventDetailModal.classList.remove('show');
      } else {
        openAdminCodeModal(() => {
          modalTitle.textContent = 'ì´ë²¤íŠ¸ ìˆ˜ì •';
          formSubmitBtn.textContent = 'ìˆ˜ì •';
          formTitle.value = this.dataset.title || '';
          formCompetitor.value = this.dataset.competitor || '';
          formGame.value = this.dataset.game || '';
          const platforms = (this.dataset.platform || '').split(',').map(s => s.trim());
          formPlatformGroup.querySelectorAll('input[type=checkbox]').forEach(cb => {
            cb.checked = platforms.includes(cb.value);
          });
          formType.value = this.dataset.type || '';
          const periodMatch = (this.dataset.period||'').match(/(\d{4})ë…„ (\d{1,2})ì›” (\d{1,2})ì¼ ~ (\d{4})ë…„ (\d{1,2})ì›” (\d{1,2})ì¼/);
          if (periodMatch) {
            formStart.value = `${periodMatch[1]}-${periodMatch[2].padStart(2,'0')}-${periodMatch[3].padStart(2,'0')}`;
            formEnd.value = `${periodMatch[4]}-${periodMatch[5].padStart(2,'0')}-${periodMatch[6].padStart(2,'0')}`;
          } else {
            formStart.value = '';
            formEnd.value = '';
          }
          if (this.dataset.images) {
            try {
              uploadedImages = JSON.parse(this.dataset.images);
            } catch {
              uploadedImages = this.dataset.img ? [this.dataset.img] : [];
            }
            renderMultiPreview();
          } else if (this.dataset.img) {
            uploadedImages = [this.dataset.img];
            renderMultiPreview();
          } else {
            uploadedImages = [];
            renderMultiPreview();
          }
          formLink.value = this.dataset.link || '';
          formContent.value = this.dataset.content || '';
          formBenefit.value = this.dataset.benefit || '';
          eventModal.classList.add('show');
          eventDetailModal.classList.remove('show');
        });
      }
    };
   // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
   document.getElementById('logoutBtn').onclick = function() {
     setAdminLoginState(false);
   };

   // í•„í„° ê¸°ëŠ¥ êµ¬í˜„
   function filterEvents() {
     const checkedCompetitors = Array.from(document.querySelectorAll('.filter-competitor:checked')).map(cb => cb.value);
     const checkedGames = Array.from(document.querySelectorAll('.filter-game:checked')).map(cb => cb.value);
     const checkedPlatforms = Array.from(document.querySelectorAll('.filter-platform:checked')).map(cb => cb.value);
     const checkedTypes = Array.from(document.querySelectorAll('.filter-type:checked')).map(cb => cb.value);
     const startDate = document.getElementById('filterStart').value;
     const endDate = document.getElementById('filterEnd').value;
     document.querySelectorAll('.event-grid-row').forEach(row => {
       let show = true;
       // ì´ë¯¸ì§€ ì…€
       const imgCell = row.querySelector('.event-grid-cell.img');
       const imgSrc = imgCell ? imgCell.querySelector('img').src : '';
       const imgMatch = imgSrc.match(/^https?:\/\/[^\/]+\/[^?#]+/); // URL íŒ¨í„´ ë§¤ì¹­
       const isImageFiltered = checkedCompetitors.length > 0 && !checkedCompetitors.includes(row.dataset.competitor) ||
                                checkedGames.length > 0 && !checkedGames.includes(row.dataset.game) ||
                                checkedPlatforms.length > 0 && !checkedPlatforms.some(p => row.dataset.platform.includes(p)) ||
                                checkedTypes.length > 0 && !checkedTypes.includes(row.dataset.type) ||
                                startDate && row.dataset.end && row.dataset.end < startDate ||
                                endDate && row.dataset.start && row.dataset.start > endDate;

       if (isImageFiltered) {
         row.style.display = 'none';
       } else {
         row.style.display = '';
       }
     });
   }
   document.querySelectorAll('.filter-panel input').forEach(input => {
     input.addEventListener('change', filterEvents);
   });

   // í•„í„° ì²´í¬ ì‹œ label í•˜ì´ë¼ì´íŠ¸
   function updateFilterLabelHighlight() {
     document.querySelectorAll('.filter-section input[type="checkbox"]').forEach(cb => {
       if (cb.checked) {
         cb.parentElement.classList.add('filter-checked');
       } else {
         cb.parentElement.classList.remove('filter-checked');
       }
     });
   }
   document.querySelectorAll('.filter-section input[type="checkbox"]').forEach(cb => {
     cb.addEventListener('change', updateFilterLabelHighlight);
   });
   // ìµœì´ˆ ë Œë”ë§ ì‹œë„ ì ìš©
   updateFilterLabelHighlight();

   // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í•¨ìˆ˜ (ìˆ˜ì • ëª¨ë‹¬ì—ì„œ ì‚¬ìš©)
   function showImage(imgUrl) {
     if (!imgUrl) return;
     if (typeof imagePreview !== 'undefined' && typeof imagePreviewWrapper !== 'undefined' && typeof imageUploadInstructions !== 'undefined') {
       imagePreview.src = imgUrl;
       imagePreviewWrapper.style.display = '';
       imageUploadInstructions.style.display = 'none';
     }
   }

   // ì´ë²¤íŠ¸ ë“±ë¡/ìˆ˜ì • í¼ ì œì¶œ ì²˜ë¦¬ (ìƒˆë¡œê³ ì¹¨ ë°©ì§€ ë° ê´€ë¦¬ì ì¸ì¦ ì²´í¬)
   eventForm.addEventListener('submit', function(e) {
     e.preventDefault(); // ìƒˆë¡œê³ ì¹¨ ë°©ì§€
     if (!isAdminLoggedIn) {
       alert('ê´€ë¦¬ì ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.');
       return;
     }
     // í¼ ë°ì´í„° ìˆ˜ì§‘
     const newEvent = {
       title: formTitle.value,
       competitor: formCompetitor.value,
       game: formGame.value,
       platform: Array.from(formPlatformGroup.querySelectorAll('input[type=checkbox]:checked')).map(cb => cb.value).join(','),
       type: formType.value,
       start: formStart.value,
       end: formEnd.value,
       images: [...uploadedImages], // ì´ë¯¸ì§€ ë°°ì—´
       link: formLink.value,
       content: formContent.value,
       benefit: formBenefit.value,
       // created, updated ë“± í•„ìš”í•œ í•„ë“œ ì¶”ê°€ ê°€ëŠ¥
     };
     // ì‹¤ì œ ë“±ë¡ ì²˜ë¦¬(ì˜ˆ: ë°°ì—´ì— ì¶”ê°€, í™”ë©´ ê°±ì‹  ë“±)
     events.unshift(newEvent); // ìµœì‹ ìˆœìœ¼ë¡œ ì•ì— ì¶”ê°€
     renderEvents();
     // ëª¨ë‹¬ ë‹«ê¸°
     eventModal.classList.remove('show');
     // í¼ ì´ˆê¸°í™”
     eventForm.reset();
     uploadedImages = [];
     renderMultiPreview();
   });

   // 1. ì°¸ê³  URL ì…ë ¥ë€ value ë¹„ìš°ê¸° (HTML)
   document.addEventListener('DOMContentLoaded', function() {
     formLink.value = '';
   });

   // 2. ìƒì„¸ ëª¨ë‹¬ ì°¸ê³  URL ì²˜ë¦¬ (URL ì—†ìœ¼ë©´ ì•ˆë‚´ ë©”ì‹œì§€)
   const detailLink = document.getElementById('detailLink');
   function updateDetailLink(url) {
     if (!url || url.trim() === '' || url === '#') {
       detailLink.style.display = 'none';
       if (!document.getElementById('noUrlMsg')) {
         const msg = document.createElement('span');
         msg.id = 'noUrlMsg';
         msg.style.color = '#888';
         msg.textContent = 'URLì´ ì—†ìŠµë‹ˆë‹¤.';
         detailLink.parentNode.appendChild(msg);
       }
     } else {
       detailLink.style.display = '';
       detailLink.href = url;
       detailLink.textContent = 'ì´ë²¤íŠ¸ í˜ì´ì§€ ë°”ë¡œê°€ê¸°';
       const msg = document.getElementById('noUrlMsg');
       if (msg) msg.remove();
     }
   }
  </script>
</body>
</html> 